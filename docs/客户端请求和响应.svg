<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="3315px" height="2684px" viewBox="-0.5 -0.5 3315 2684" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-05-31T12:27:46.432Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/18.0.4 Chrome/100.0.4896.143 Electron/18.2.3 Safari/537.36&quot; etag=&quot;vjC4fmqHPm1RdIHycG2Z&quot; version=&quot;18.0.4&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;Nl182oHf97EiaET7qgCz&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 2088.63 448 L 1981.6 448 L 1868 447.36" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2093.88 448 L 2086.88 451.5 L 2088.63 448 L 2086.88 444.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 2095 69 L 2095 0 L 2320 0 L 2320 69 M 2095 69 L 3295 69 L 3295 896 L 2095 896 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 34px; margin-left: 2207px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">client.Dial("tcp", &lt;-addr)<br />客户端建立连接</font><br /></font></div></div></div></foreignObject><text x="2207" y="38" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">client.Dial("tcp", &lt;-addr)...</text></switch></g><rect x="2108" y="91" width="663" height="242" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 2283.64 480.94 L 2283.6 411.6 L 2439.6 411.6 L 2439.5 333" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2283.64 486.19 L 2280.14 479.2 L 2283.64 480.94 L 2287.14 479.19 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 2797.37 658 L 2810 658 L 2839 658" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2792.12 658 L 2799.12 654.5 L 2797.37 658 L 2799.12 661.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 2119 559 L 2119 490 L 2344 490 L 2344 559 M 2119 559 L 2791 559 L 2791 874 L 2119 874 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 524px; margin-left: 2231px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">NewClient(conn, opt)<br />返回客户端</font><br /></font></div></div></div></foreignObject><text x="2231" y="528" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">NewClient(conn, opt)...</text></switch></g><rect x="2132" y="581" width="636" height="255" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="2150" y="604" width="391" height="38" rx="5.7" ry="5.7" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 389px; height: 1px; padding-top: 623px; margin-left: 2151px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="">f := codec.NewCodecFunMap[opt.CodecType]</span></div></div></div></foreignObject><text x="2346" y="628" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">f := codec.NewCodecFunMap[opt.CodecType]</text></switch></g><rect x="2143" y="674" width="391" height="38" rx="5.7" ry="5.7" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 389px; height: 1px; padding-top: 693px; margin-left: 2144px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="">json.NewEncoder(conn).Encode(opt)</span></div></div></div></foreignObject><text x="2339" y="698" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">json.NewEncoder(conn).Encode(opt)</text></switch></g><rect x="2158" y="759" width="391" height="38" rx="5.7" ry="5.7" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 389px; height: 1px; padding-top: 778px; margin-left: 2159px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="">return newClientCodec(f(conn), opt)</span></div></div></div></foreignObject><text x="2354" y="783" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">return newClientCodec(f(conn), opt)</text></switch></g><rect x="2541" y="616" width="190" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 629px; margin-left: 2636px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">创建编解码器构造函数</div></div></div></foreignObject><text x="2636" y="634" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">创建编解码器构造函数</text></switch></g><rect x="2575" y="647" width="151" height="92" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 693px; margin-left: 2651px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">从conn中获取<br />通过json序列号的<br />Option信息<br />并进行校验</div></div></div></foreignObject><text x="2651" y="698" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">从conn中获取...</text></switch></g><rect x="2560" y="759" width="200" height="48" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 783px; margin-left: 2660px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">返回初始化编解码器和<br />其它信息后的Client实例</div></div></div></foreignObject><text x="2660" y="788" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">返回初始化编解码器和&#xa;其它信息后的Client实例</text></switch></g><rect x="2162" y="109" width="316" height="36" rx="5.4" ry="5.4" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 314px; height: 1px; padding-top: 127px; margin-left: 2163px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="">opt, err := parseOptions</span></div></div></div></foreignObject><text x="2320" y="132" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">opt, err := parseOptions</text></switch></g><rect x="2150" y="174" width="348" height="41" rx="6.15" ry="6.15" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 346px; height: 1px; padding-top: 195px; margin-left: 2151px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="">conn, err := net.Dial(networkm, address)</span></div></div></div></foreignObject><text x="2324" y="200" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">conn, err := net.Dial(networkm, address)</text></switch></g><rect x="2162" y="250" width="348" height="38" rx="5.7" ry="5.7" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 346px; height: 1px; padding-top: 269px; margin-left: 2163px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="">return NewClient(conn, opt)</span></div></div></div></foreignObject><text x="2336" y="274" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">return NewClient(conn, opt)</text></switch></g><path d="M 3178 507 L 3178 256.6 L 2777.37 256.53" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2772.12 256.53 L 2779.12 253.03 L 2777.37 256.53 L 2779.12 260.03 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="2839" y="507" width="441" height="352" rx="52.8" ry="52.8" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 439px; height: 1px; padding-top: 683px; margin-left: 2841px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">经过newClientCodec后的Client实例</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">最后由return NewClient()返回</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br /></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Client := {<br />seq:1</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br />cc: GobCodec{<br />conn: conn<br />buf: buf<br />dec: gob.NewDecoder(conn)<br />enc:  gob.NewEncoder(buf)<br />}</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br />pending: make(map[uint64])*Call<br />}</blockquote></div></div></div></foreignObject><text x="2841" y="688" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">经过newClientCodec后的Client实例...</text></switch></g><rect x="2505" y="114" width="136" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 127px; margin-left: 2573px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">初始化协商信息</div></div></div></foreignObject><text x="2573" y="132" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">初始化协商信息</text></switch></g><rect x="2521" y="181.5" width="118" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 195px; margin-left: 2580px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">建立网络连接</div></div></div></foreignObject><text x="2580" y="200" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">建立网络连接</text></switch></g><rect x="2536" y="250" width="142" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 263px; margin-left: 2607px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">初始化client实例</div></div></div></foreignObject><text x="2607" y="268" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">初始化client实例</text></switch></g><path d="M 1302 264 L 1302 200 L 1614 200 L 1614 264 M 1302 264 L 1868 264 L 1868 874 L 1302 874 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 232px; margin-left: 1458px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">newClientCodec(codec.Codec)<br />初始化消息编解码器</font><br /></font></div></div></div></foreignObject><text x="1458" y="236" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">newClientCodec(codec.Codec)...</text></switch></g><rect x="1321" y="551" width="493" height="303" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="1375" y="574" width="356" height="135" rx="20.25" ry="20.25" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 354px; height: 1px; padding-top: 642px; margin-left: 1376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">client := &amp;Client{<br />seq : 1<br />cc: cc<br />pending: make(map[uint64])*Call<br />}</div></div></div></foreignObject><text x="1553" y="647" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">client := &amp;Client{...</text></switch></g><rect x="1421" y="729" width="254" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 252px; height: 1px; padding-top: 749px; margin-left: 1422px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">go client.receive()</div></div></div></foreignObject><text x="1548" y="754" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">go client.receive()</text></switch></g><rect x="1423" y="784" width="254" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 252px; height: 1px; padding-top: 804px; margin-left: 1424px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">return client</div></div></div></foreignObject><text x="1550" y="809" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">return client</text></switch></g><rect x="1321" y="287" width="493" height="241" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="1357" y="298" width="361" height="135" rx="20.25" ry="20.25" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 359px; height: 1px; padding-top: 366px; margin-left: 1358px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">f(conn) = NewGobCodec(conn)<br />return &amp;GobCodec{<br />conn: conn<br />buf: buf<br />dec: gob.NewDecoder(conn)<br />enc: gob.NewEncoder(buf)</div></div></div></foreignObject><text x="1538" y="371" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">f(conn) = NewGobCodec(conn)...</text></switch></g><rect x="1463" y="454" width="166" height="49" rx="7.35" ry="7.35" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 164px; height: 1px; padding-top: 479px; margin-left: 1464px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">f(conn) = cc</div></div></div></foreignObject><text x="1546" y="484" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">f(conn) = cc</text></switch></g><path d="M 2077 1114 L 2077 1052 L 2884 1052 L 2884 1114 M 2077 1114 L 3314 1114 L 3314 2082 L 2077 2082 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1083px; margin-left: 2481px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">client.Call(serviceMthod, args, &amp;reply)<br />进行一次Call请求</font><br /></font></div></div></div></foreignObject><text x="2481" y="1087" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">client.Call(serviceMthod, args, &amp;reply)...</text></switch></g><rect x="2096" y="1139" width="1150" height="195" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="2302" y="1256" width="166" height="49" rx="7.35" ry="7.35" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 164px; height: 1px; padding-top: 1281px; margin-left: 2303px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">return Call.Error</div></div></div></foreignObject><text x="2385" y="1286" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">return Call.Error</text></switch></g><rect x="2123" y="1157" width="637" height="80" rx="12" ry="12" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 635px; height: 1px; padding-top: 1197px; margin-left: 2124px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">callDone := client.Go(serviceMthod, args, reply, make(chan *Call, 1))<br />call := &lt;-(callDone.Done)</div></div></div></foreignObject><text x="2442" y="1202" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">callDone := client.Go(serviceMthod, args, reply, make(chan *Call, 1))...</text></switch></g><path d="M 2110 1553 L 2110 1484 L 2335 1484 L 2335 1553 M 2110 1553 L 3036 1553 L 3036 2049 L 2110 2049 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1519px; margin-left: 2222px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">client.Go<br />异步调用函数</font><br /></font></div></div></div></foreignObject><text x="2222" y="1522" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">client.Go...</text></switch></g><rect x="2123" y="1575" width="790" height="454" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="2154" y="1904" width="250" height="41" rx="6.15" ry="6.15" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1925px; margin-left: 2155px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">client.send(call)</div></div></div></foreignObject><text x="2279" y="1930" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">client.send(call)</text></switch></g><rect x="2148" y="1705" width="326" height="162" rx="24.3" ry="24.3" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 324px; height: 1px; padding-top: 1786px; margin-left: 2150px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">call := &amp;Call{<br />ServiceMethod: serviceMethod,<br />Args: args,<br />Reply: reply,<br />Done: done,</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">}</blockquote></div></div></div></foreignObject><text x="2150" y="1791" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">call := &amp;Call{...</text></switch></g><rect x="2148" y="1591" width="334" height="74" rx="11.1" ry="11.1" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 332px; height: 1px; padding-top: 1628px; margin-left: 2150px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">if done == nil {</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="white-space: pre;">	</span>done = make(chan *Call, 10)<br /></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">}</blockquote></div></div></div></foreignObject><text x="2150" y="1633" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">if done == nil {...</text></switch></g><rect x="2154" y="1969" width="250" height="41" rx="6.15" ry="6.15" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1990px; margin-left: 2155px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">return call</div></div></div></foreignObject><text x="2279" y="1995" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">return call</text></switch></g><rect x="2494" y="1733" width="109" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1746px; margin-left: 2549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">生成call实例</div></div></div></foreignObject><text x="2549" y="1751" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">生成call实例</text></switch></g><rect x="2427" y="1919" width="199" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1932px; margin-left: 2527px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">传入call实例，引用类型</div></div></div></foreignObject><text x="2527" y="1937" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">传入call实例，引用类型</text></switch></g><rect x="2418" y="1965.5" width="420" height="48" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1990px; margin-left: 2628px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">因为call的引用类型，所以最后返回的call实例<br />是已经经过registerCall和receive处理后的call实例了</div></div></div></foreignObject><text x="2628" y="1995" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">因为call的引用类型，所以最后返回的call实例...</text></switch></g><rect x="2771" y="1170" width="457" height="70" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1205px; margin-left: 3000px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">因为receive最后调用call.done()<br />也就是说将reply写入完成后的call实例放入了call.Done中<br />所以可以直接通过call.Done中调用</div></div></div></foreignObject><text x="3000" y="1210" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">因为receive最后调用call.done()...</text></switch></g><path d="M 2685.5 1553 L 2675.76 1340.36" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2675.52 1335.12 L 2679.33 1341.95 L 2675.76 1340.36 L 2672.34 1342.27 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="2698" y="1442" width="451" height="28" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1456px; margin-left: 2924px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 24px;">8、将处理好的call请求，返回给client.Call</font></div></div></div></foreignObject><text x="2924" y="1461" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">8、将处理好的call请求，返回给client.Call</text></switch></g><path d="M 1997 1259 L 2073.2 1259" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2078.45 1259 L 2071.45 1262.5 L 2073.2 1259 L 2071.45 1255.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1265" y="1203" width="732" height="112" rx="16.8" ry="16.8" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 730px; height: 1px; padding-top: 1259px; margin-left: 1266px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Go和Call是客户端暴露给用户的两个RPC服务调用接口，Go是一个异步接口，返回Call实例。<br />Call是对Go的封装，阻塞call.Done，等待响应返回，是一个同步接口</div></div></div></foreignObject><text x="1631" y="1264" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">Go和Call是客户端暴露给用户的两个RPC服务调用接口，Go是一个异步接口，返回Call实例。...</text></switch></g><path d="M 1051 1507 L 1051 1443 L 1363 1443 L 1363 1507 M 1051 1507 L 1973 1507 L 1973 1886 L 1051 1886 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1475px; margin-left: 1207px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">client.send<br />发送请求</font><br /></font></div></div></div></foreignObject><text x="1207" y="1478" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">client.send...</text></switch></g><rect x="1070" y="1528" width="847" height="333" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="1108" y="1619" width="490" height="103" rx="15.45" ry="15.45" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 488px; height: 1px; padding-top: 1671px; margin-left: 1110px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">client.header.ServiceMethod = call.Service.Method<br />client.header.Seq = seq<br />client.header.Error = ""</blockquote></div></div></div></foreignObject><text x="1110" y="1676" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">client.header.ServiceMethod = call.Service.Method...</text></switch></g><rect x="1114" y="1772" width="436" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 434px; height: 1px; padding-top: 1792px; margin-left: 1115px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">err := client.cc.Write(&amp;client.header, call.Args)</div></div></div></foreignObject><text x="1332" y="1797" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">err := client.cc.Write(&amp;client.header, call.Args)</text></switch></g><rect x="1106" y="1543" width="328" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1563px; margin-left: 1107px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">seq, err := client.registerCall(call)</div></div></div></foreignObject><text x="1270" y="1568" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">seq, err := client.registerCall(call)</text></switch></g><rect x="1451" y="1553" width="199" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1566px; margin-left: 1551px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">注册call到未处理队列中</div></div></div></foreignObject><text x="1551" y="1571" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">注册call到未处理队列中</text></switch></g><rect x="1619" y="1657.5" width="100" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1671px; margin-left: 1669px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">设置请求头</div></div></div></foreignObject><text x="1669" y="1676" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">设置请求头</text></switch></g><rect x="1572" y="1775" width="327" height="48" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1799px; margin-left: 1736px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">根据Write中的逻辑，header与body最后<br />向conn中写入</div></div></div></foreignObject><text x="1736" y="1804" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">根据Write中的逻辑，header与body最后...</text></switch></g><path d="M 0 1491 L 0 1427 L 312 1427 L 312 1491 M 0 1491 L 805 1491 L 805 1882 L 0 1882 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1459px; margin-left: 156px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">client.registerCall(call)<br />注册Call到未处理队列中</font><br /></font></div></div></div></foreignObject><text x="156" y="1462" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">client.registerCall(call)...</text></switch></g><rect x="19" y="1512" width="708" height="349" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="55" y="1678" width="254" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 252px; height: 1px; padding-top: 1698px; margin-left: 56px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">client.pending[call.seq] = call</div></div></div></foreignObject><text x="182" y="1703" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">client.pending[call.seq] = c...</text></switch></g><rect x="55" y="1527" width="328" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1547px; margin-left: 56px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">if client.closing || client.shutdown</div></div></div></foreignObject><text x="219" y="1552" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">if client.closing || client.shutdown</text></switch></g><rect x="55" y="1592" width="254" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 252px; height: 1px; padding-top: 1612px; margin-left: 56px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">call.Seq = client.seq</div></div></div></foreignObject><text x="182" y="1617" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">call.Seq = client.seq</text></switch></g><rect x="55" y="1765" width="254" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 252px; height: 1px; padding-top: 1785px; margin-left: 56px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">return call.Seq, nil</div></div></div></foreignObject><text x="182" y="1790" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">return call.Seq, nil</text></switch></g><rect x="400" y="1530" width="190" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1543px; margin-left: 495px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">检查关闭和错误请情况</div></div></div></foreignObject><text x="495" y="1548" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">检查关闭和错误请情况</text></switch></g><rect x="330" y="1596" width="145" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1609px; margin-left: 403px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">设置call请求编号</div></div></div></foreignObject><text x="403" y="1614" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">设置call请求编号</text></switch></g><rect x="316" y="1667" width="351" height="70" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1702px; margin-left: 492px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">添加到为未处理请求队列中<br />因为call为引用类型<br />所以在这里call仍然指向client.Go创建的call</div></div></div></foreignObject><text x="492" y="1707" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">添加到为未处理请求队列中因为call为引用类型...</text></switch></g><rect x="330" y="1782" width="235" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1795px; margin-left: 448px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">返回call的序列号和错误信息</div></div></div></foreignObject><text x="448" y="1800" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">返回call的序列号和错误信息</text></switch></g><path d="M 805 1577.25 L 1099.63 1572.36" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1104.88 1572.27 L 1097.94 1575.88 L 1099.63 1572.36 L 1097.82 1568.89 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 874 2284 L 874 2220 L 1186 2220 L 1186 2284 M 874 2284 L 2102 2284 L 2102 2683 L 874 2683 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2252px; margin-left: 1030px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;"><font style=""><font style="font-size: 18px;">client.receive<br /></font>接受响应<br /></font></div></div></div></foreignObject><text x="1030" y="2255" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">client.receive...</text></switch></g><rect x="893" y="2305" width="785" height="351" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="931" y="2396" width="342" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 340px; height: 1px; padding-top: 2416px; margin-left: 933px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">call := client.removeCall(h.Seq)</blockquote></div></div></div></foreignObject><text x="933" y="2421" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">call := client.removeCall(h.Seq)</text></switch></g><rect x="931" y="2502" width="328" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 2522px; margin-left: 932px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">client.cc.ReadBody(call.Reply)</div></div></div></foreignObject><text x="1095" y="2527" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">client.cc.ReadBody(call.Reply)</text></switch></g><rect x="941" y="2578.5" width="285" height="31" rx="4.65" ry="4.65" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 283px; height: 1px; padding-top: 2594px; margin-left: 943px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">call.done()</blockquote></div></div></div></foreignObject><text x="943" y="2599" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">call.done()</text></switch></g><rect x="929" y="2320" width="328" height="39" rx="5.85" ry="5.85" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 2340px; margin-left: 930px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">client.cc.ReadHeader(&amp;h)</div></div></div></foreignObject><text x="1093" y="2345" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">client.cc.ReadHeader(&amp;h)</text></switch></g><rect x="1324" y="2330" width="100" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2343px; margin-left: 1374px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">读取请求头</div></div></div></foreignObject><text x="1374" y="2348" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">读取请求头</text></switch></g><rect x="1307" y="2363" width="244" height="114" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2420px; margin-left: 1429px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">如果请求头读取正确<br />则将call删除未处理请求队列<br />并返回删除call的实例<br />这里call的并不是一个新的call<br />而依旧是client.Go哪里创建的</div></div></div></foreignObject><text x="1429" y="2425" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">如果请求头读取正确则将call删除未处理请求队列...</text></switch></g><rect x="1282" y="2493" width="230" height="48" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2517px; margin-left: 1397px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">读取body的内容也就是Args<br />并写入到reply中</div></div></div></foreignObject><text x="1397" y="2522" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">读取body的内容也就是Args...</text></switch></g><rect x="1257" y="2604" width="100" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2617px; margin-left: 1307px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">通知调用方</div></div></div></foreignObject><text x="1307" y="2622" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">通知调用方</text></switch></g><rect x="1704" y="2541" width="356" height="93" rx="13.95" ry="13.95" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 354px; height: 1px; padding-top: 2588px; margin-left: 1706px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">func (call *Call) done() {</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="white-space: pre;">	</span>call.Done &lt;- call<br /></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">}</blockquote></div></div></div></foreignObject><text x="1706" y="2593" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">func (call *Call) done() {...</text></switch></g><path d="M 1704 2587.5 L 1232.37 2593.91" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1227.12 2593.98 L 1234.07 2590.39 L 1232.37 2593.91 L 1234.16 2597.39 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1973 1851.2 L 2148.1 1922.11" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2152.96 1924.08 L 2145.16 1924.7 L 2148.1 1922.11 L 2147.79 1918.21 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1873" y="405" width="175" height="28" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 419px; margin-left: 1961px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 24px;">2、初始化client</font></div></div></div></foreignObject><text x="1961" y="424" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">2、初始化client</text></switch></g><rect x="2703" y="990" width="227" height="28" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1004px; margin-left: 2817px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 24px;">3、发起一次call请求</font></div></div></div></foreignObject><text x="2817" y="1009" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">3、发起一次call请求</text></switch></g><rect x="820" y="1528" width="229" height="28" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1542px; margin-left: 935px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 24px;">5、注册到pending中</font></div></div></div></foreignObject><text x="935" y="1547" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">5、注册到pending中</text></switch></g><rect x="81" y="2216" width="732" height="112" rx="16.8" ry="16.8" fill="#e6e6e6" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 730px; height: 1px; padding-top: 2272px; margin-left: 82px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">在创建Client实例时，已经启动go receive()进行接受响应，每当有send发送，server.handleResquest进行处理后，调用sendResponset发送回client，则client就会调用<br />receive从conn中读取header和body</div></div></div></foreignObject><text x="447" y="2277" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">在创建Client实例时，已经启动go receive()进行接受响应，每当有send发送，server.handleResquest进行处理后，调用sendResponset发送回client，则client就会调用...</text></switch></g><path d="M 1375.54 1885.56 L 1381.07 2277.53" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1381.15 2282.78 L 1377.55 2275.83 L 1381.07 2277.53 L 1384.55 2275.73 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1856" y="42" width="215" height="28" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 56px; margin-left: 1964px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 24px;">1、创建客户端连接</font></div></div></div></foreignObject><text x="1964" y="61" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">1、创建客户端连接</text></switch></g><path d="M 2695 896 L 2690.74 1041.51" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2690.58 1046.76 L 2687.29 1039.66 L 2690.74 1041.51 L 2694.29 1039.87 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1911" y="1919" width="143" height="28" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1933px; margin-left: 1983px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 24px;">4、发送请求</font></div></div></div></foreignObject><text x="1983" y="1938" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">4、发送请求</text></switch></g><rect x="799" y="2062" width="533" height="28" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2076px; margin-left: 1066px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 24px;">6、接受响应，并将返回内容写入到call中的replay</font></div></div></div></foreignObject><text x="1066" y="2081" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px" text-anchor="middle">6、接受响应，并将返回内容写入到call中的replay</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>